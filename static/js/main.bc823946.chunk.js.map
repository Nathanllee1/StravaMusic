{"version":3,"sources":["demo.png","Spotify_Logo_RGB_White.png","card.js","SignedIn.js","App.js","btn_strava_connectwith_orange.png","reportWebVitals.js","index.js"],"names":["Card","props","date","Date","parse","activity","start_date_local","id","onClick","window","location","name","toLocaleDateString","style","color","Math","round","distance","Number","EPSILON","total_elevation_gain","imageList","songList","SignedIn","useState","userObj","setObj","cards","setCards","selectedSong","setSong","fetched","setFetched","useEffect","localStorage","getItem","JSON","fetch","method","redirect","then","response","text","result","a","message","refreshTokens","setItem","catch","error","console","log","songs","cardList","Object","keys","getActivity","stringify","song","locSong","getSong","status","album","push","className","onMouseOver","src","images","url","alt","width","refOptions","res","stravaTok","spotTok","requestOptions","returnObj","myHeaders","Headers","append","headers","results","firstname","lastname","profile","clear","reload","length","App","strava","setStrava","spotify","setSpotify","content","setContent","apiLoc","URL","stravaCode","searchParams","get","raw","body","spotRef","stravaId","stravaRef","onSpotifyClick","height","spot","getData","spotCode","submit","demo","onStravaClick","origin","encodeURI","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bc823946.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/demo.c1d4f23b.png\";","export default __webpack_public_path__ + \"static/media/Spotify_Logo_RGB_White.f48fb565.png\";","import React from 'react';\n\n\nfunction Card(props) {\n\n\n    let date = new Date(Date.parse(props.activity.start_date_local))\n\n    return (\n        <div id={\"card\"} key={props.id}>\n            <h2 onClick={() => window.location = \"https://strava.com/activities/\" + props.id} id={\"header\"}>{props.activity.name}</h2>\n            <p>{date.toLocaleDateString()}</p>\n            <div id={\"stats\"}>\n                <p><span style={{color: \"grey\"}}>Distance:</span> {Math.round((props.activity.distance / 1609) + Number.EPSILON) * 100 / 100} miles  &nbsp; &nbsp; &nbsp;\n\n                    <span style={{color: \"grey\"}}>Elevation Climbed:</span> {Math.round(props.activity.total_elevation_gain * 3.28084 + Number.EPSILON) * 100 / 100} feet</p>\n            </div>\n            <br/>\n\n            <div id={\"songList\"}>\n                {props.imageList}\n            </div>\n            <br />\n            <span id={\"songList\"}>{props.songList}</span>\n\n        </div>\n    )\n}\n\nexport default Card;","import React, {useState, useEffect} from 'react';\nimport Card from './card';\n\n\n\nfunction SignedIn(props) {\n\n    const [userObj, setObj] = useState({});\n    const [cards, setCards] = useState([]);\n    const [selectedSong, setSong] = useState(\"5TUZhrb8UaaA76NhzZax2Z\");\n    const [fetched, setFetched] = useState(false);\n\n    useEffect(() => {\n        if (!fetched) {\n\n            if (userObj) {\n                let requestOptions = {\n                    method: 'GET',\n                    redirect: 'follow'\n                };\n\n                if (localStorage.getItem(\"stravaInfo\")) {\n                    setObj(JSON.parse(localStorage.getItem(\"stravaInfo\")));\n                } else {\n                    fetch(`https://www.strava.com/api/v3/athlete?access_token=${localStorage.getItem(\"stravaTok\")}`, requestOptions)\n                        .then(response => response.text())\n                        .then(async result => {\n                            let res = JSON.parse(result);\n                            if (res.message === \"Authorization Error\") {\n                                await refreshTokens()\n                            }\n\n                            setObj(JSON.parse(result))\n                            localStorage.setItem(\"stravaInfo\", result);\n                        })\n                        .catch(error => console.log('error', error));\n                }\n\n\n\n                let songOpt = {\n                    method: 'GET',\n                    redirect: 'follow'\n                };\n\n                fetch(`https://quiet-gorge-17933.herokuapp.com/getActivities/?id=${localStorage.getItem(\"id\")}`, songOpt)\n                    .then(response => response.text())\n                    .then(async result => {\n                        console.log(result);\n                        let songs = JSON.parse(result);\n\n                        let cardList = []\n\n                        for (const id of Object.keys(songs)) {\n                            console.log(id)\n                            let activity = localStorage.getItem(id);\n                            if (!activity) { // if it's not in local storage\n                                activity = await getActivity(id);\n                                localStorage.setItem(id, JSON.stringify(activity))\n                            } else {\n                                activity = JSON.parse(activity);\n                            }\n\n                            let songList = []\n                            let imageList = []\n                            for (const song of songs[id]) {\n                                let locSong = localStorage.getItem(song)\n                                if (locSong) {\n                                    locSong = JSON.parse(locSong);\n                                } else {\n                                    locSong = JSON.parse(await (getSong(song)));\n\n                                    if (locSong.error && locSong.error.status === 401) { // If token expired\n                                        await refreshTokens();\n                                    }\n                                    localStorage.setItem(song, JSON.stringify(locSong))\n                                }\n\n                                if (locSong.album) {\n                                    songList.push(<span className={selectedSong} id={locSong.id}>{locSong.name},&nbsp; </span>)\n                                    imageList.push(\n                                        <img id={locSong.id} onMouseOver={() => setSong(locSong.id)} key={locSong.id} src={locSong[\"album\"].images[1].url} alt={\"songImage\"} width={80}/>\n                                    )\n                                }\n\n                            }\n                            console.log(imageList)\n                            cardList.push(<Card id={id} imageList={imageList} songList={songList} activity={activity}/>)\n                            //<Card id={id} imageList={imageList} songList={songList} activity={activity}/>\n\n                        }\n                        console.log(cardList);\n                        setCards(cardList);\n\n                    })\n                    .catch(error => console.log('error', error));\n            }\n        }\n\n        setFetched(true);\n\n    }, [fetched, selectedSong, userObj]);\n\n    const refreshTokens = async() => {\n        let refOptions = {\n            method: 'GET'\n        }\n        fetch(`https://quiet-gorge-17933.herokuapp.com/refreshTokens/?id=${localStorage.getItem(\"id\")}`, refOptions)\n            .then(response => response.text())\n            .then(result => {\n                let res = JSON.parse(result);\n                localStorage.setItem(\"stravaTok\", res.stravaTok);\n                localStorage.setItem(\"spotifyTok\", res.spotTok);\n            })\n            .catch(error => console.log('error', error))\n    }\n\n    const getActivity = async (id) => {\n        let requestOptions = {\n            method: 'GET',\n            redirect: 'follow'\n        };\n\n        let returnObj;\n\n        await fetch(\"https://www.strava.com/api/v3/activities/\" + id +\"?access_token=\" + localStorage.getItem(\"stravaTok\"), requestOptions)\n            .then(response => response.text())\n            .then(result => {\n                returnObj = JSON.parse(result);\n            })\n            .catch(error => console.log('error', error));\n\n        return returnObj;\n    }\n\n    const getSong = async(id) => {\n        let myHeaders = new Headers();\n        myHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem(\"spotifyTok\"));\n\n        let results;\n\n        let requestOptions = {\n            method: 'GET',\n            headers: myHeaders,\n            redirect: 'follow'\n        };\n\n        await fetch(\"https://api.spotify.com/v1/tracks/\" + id, requestOptions)\n            .then(response => response.text())\n            .then(result => results = result)\n            .catch(error => console.log('error', error));\n\n        return results;\n    }\n\n    const signout = () => {\n        localStorage.clear();\n        window.location.reload(false);\n    }\n\n    console.log((cards === []));\n\n\n\n    return (\n        <div id={\"appPage\"} >\n            <div id={\"bar\"}>\n                <div id={\"profile\"}>\n                    <p>{userObj.firstname} {userObj.lastname}</p>\n                    <img id=\"profilePic\" src={userObj.profile} alt={\"profilepic\"}/>\n                    <p id={\"signout\"} onClick={signout}>Sign out</p>\n                </div>\n            </div>\n            <div id={\"cardList\"}>\n\n                {cards.length !== 0 ? cards : <div id={\"content\"}><h2>Everything is setup, when you record an activity while listening to Spotify, it will show up here</h2></div>}\n            </div>\n\n\n        </div>\n\n    )\n}\n\nexport default SignedIn;\n//<Card id={id} imageList={imageList} songList={songList} activity={card.activity}/>","import './App.css';\nimport React, {useState, useEffect} from 'react';\nimport demo from './demo.png'\nimport spot from './Spotify_Logo_RGB_White.png'\nimport stravaCon from './btn_strava_connectwith_orange.png'\nimport SignedIn from './SignedIn';\n\nfunction App() {\n\n    const [strava, setStrava] = useState();\n    const [spotify, setSpotify] = useState();\n\n    const [content, setContent] = useState();\n    const [fetched, setFetched] = useState(false);\n\n    const apiLoc = \"https://quiet-gorge-17933.herokuapp.com\";\n\n    useEffect(() => {\n        if (!fetched) {\n            const url = new URL(window.location);\n\n            if (localStorage.getItem(\"lastClicked\") === \"strava\" ) {\n                let stravaCode = url.searchParams.get(\"code\");\n\n                if (!stravaCode) { // edge case where it gets stuck on last clicked\n                    localStorage.clear();\n                    window.location.reload(false);\n                }\n\n                const getData = async() => {\n                    let myHeaders = new Headers();\n                    myHeaders.append(\"Content-Type\", \"application/json\");\n\n                    let raw = JSON.stringify({\"strava\":stravaCode});\n\n                    let requestOptions = {\n                        method: 'POST',\n                        headers: myHeaders,\n                        body: raw,\n                        redirect: 'follow'\n                    };\n\n                    await fetch(apiLoc + \"/authorizeStrava\", requestOptions)\n                        .then(response => response.text())\n                        .then(result => {\n                            console.log(result)\n                            let res = JSON.parse(result);\n                            console.log(res);\n                            if (res.spotRef) { // If the user exists\n\n                                localStorage.setItem(\"stravaTok\", res.stravaTok);\n                                localStorage.setItem(\"id\", res.stravaId);\n                                //console.log(res.stravaID)\n                                localStorage.setItem(\"spotifyTok\", res.spotTok);\n                                localStorage.setItem(\"lastClicked\", \"signedIn\")\n                                setContent(<SignedIn />);\n                            } else { // If it's a new user\n                                localStorage.setItem(\"stravaTok\", res.stravaTok);\n                                localStorage.setItem(\"stravaRef\", res.stravaRef);\n                                localStorage.setItem(\"id\", res.stravaId);\n\n                                setContent (\n                                    <div id=\"content\">\n                                        <h1>Awesome! Link your Spotify account</h1>\n                                        <div id=\"spotify\" onClick={onSpotifyClick}>\n                                            <img height={\"24px\"} src={spot} alt={\"spotify\"}/>\n                                        </div>\n                                    </div>\n                                )\n                            }\n                        })\n                        .catch(error => console.log('error', error));\n                }\n                getData();\n\n            } else if (localStorage.getItem(\"lastClicked\") === \"signedIn\") {\n                setContent (\n                    <SignedIn />\n                )\n            } else if (localStorage.getItem(\"lastClicked\") === \"spotify\" ) {\n                let spotCode = url.searchParams.get(\"code\")\n                localStorage.setItem(\"spotify\", spotCode);\n                submit();\n\n            } else {\n                setContent (\n                    <div id=\"content\">\n                        <h1>Put the songs you listened to on <span style={{\"color\":\"#1DB954\"}}>Spotify</span> during your activities on <span style={{\"color\":\"#fc5200\"}}>Strava</span></h1>\n                        <img width=\"350\" src={demo} alt=\"Demo\"/>\n                        <p>Once setup, the process is done completely automatically</p>\n                        <br />\n                        <br />\n                        <h2>Start by connecting your Strava Account</h2>\n                        <p>Or if you've already signed up also click here</p>\n                        <img id=\"stravacon\" src={stravaCon} onClick={onStravaClick} alt=\"stravaConnect\"/>\n                    </div>\n                )\n            }\n\n            setSpotify(localStorage.getItem(\"spotify\"));\n            setStrava(localStorage.getItem(\"strava\"));\n\n            setFetched(true);\n        }\n\n    }, [fetched])\n\n    const onStravaClick = () => {\n        localStorage.setItem(\"lastClicked\", \"strava\")\n        //console.log(`http://www.strava.com/oauth/authorize?client_id=24406&response_type=code&redirect_uri=` + window.location.origin +`/exchange_token&approval_prompt=force&scope=activity:read_all,activity:write`)\n        window.location = `http://www.strava.com/oauth/authorize?client_id=24406&response_type=code&redirect_uri=` + window.location.origin +`/exchange_token&approval_prompt=force&scope=activity:read_all,activity:write`;\n    }\n\n    const onSpotifyClick = () => {\n        //encodeURIComponent(curUrl)\n        localStorage.setItem(\"lastClicked\", \"spotify\")\n        window.location = \"https://accounts.spotify.com/authorize?client_id=5a18a679262e4ac094c14cacfd5fd861&response_type=code&redirect_uri=\" + encodeURI(window.location.origin)  + \"&scope=user-read-private%20user-read-email%20user-read-recently-played&state=34fFs29kd09\"\n    }\n\n    const submit = () => {\n\n            let myHeaders = new Headers();\n            myHeaders.append(\"Content-Type\", \"application/json\");\n\n            let raw = JSON.stringify({\"stravaTok\":localStorage.getItem(\"stravaTok\"),\"stravaRef\":localStorage.getItem(\"stravaRef\"), \"spotify\":localStorage.getItem(\"spotify\"), \"id\":localStorage.getItem(\"id\")});\n\n            let requestOptions = {\n                method: 'POST',\n                headers: myHeaders,\n                body: raw,\n                redirect: 'follow'\n            };\n\n            fetch(apiLoc + \"/createuser\", requestOptions)\n                .then(response => response.text())\n                .then(result => {\n                    console.log(result);\n                    let res = JSON.parse(result);\n                    localStorage.setItem(\"spotTok\",res.spotTok);\n                    localStorage.setItem(\"lastClicked\", \"signedIn\")\n\n                    setContent(<SignedIn />)\n                })\n                .catch(error => console.log('error', error));\n\n    }\n\n\n    return (\n    <div className=\"App\">\n        <div id={\"debug\"}>\n            <button onClick={onStravaClick}>Connect with strava</button>\n            <button onClick={onSpotifyClick}>Connect with spotify</button>\n            <p>Strava: {strava}</p>\n            <p>Spotify: {spotify}</p>\n            <button onClick={submit}>Submit</button>\n            <button onClick={()=>localStorage.clear()}>Clear</button>\n        </div>\n        <br/>\n\n        {content}\n\n    </div>\n  );\n}\n\nexport default App;\n\n/*\n<br/>\n      <button onClick={onStravaClick}>Connect with strava</button>\n        <button onClick={onSpotifyClick}>Connect with spotify</button>\n        <p>Strava: {strava}</p>\n        <p>Spotify: {spotify}</p>\n        <button onClick={submit}>Submit</button>\n */","export default \"data:image/png;base64,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\"","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}